#include <iostream>
#include <fstream>
#include <string>

using namespace std;


//Main branch function in a three "branch" structure. Combines the first two numbers in the array using each of the four operators, then moves to the second loop after each combination.
void operateFunc(float numArr[]);
//Second branch function. Combines the results of the first branch with the third number in the array, then sends the result to the third function.
void secondLoop (float numArr[], float sum2, float C, float D, string &op1, string &op2, string &op3);
//Third branch function. Combines the previous result with the last (4th) number in the array, then outputs a message to the screen if the result is 24.
void thirdLoop (float numArr[], float sum3, float intD, string &op1, string &op2, string &op3);

int main(){

	float arrayInput[4] = {4.0, 6.0, 8.0, 10.0};
	float arrayTemp[4] = {0.0,0.0,0.0,0.0};


	//This block of code takes the input array, and assigns the temporary array each possible sequence of 4 numbers.
	//The code for calculating 24 is then run using the operate function before the next sequence is assigned.
	for (int i=0;i<4;i++){

		for(int j=0;j<4;j++){

			if(j==i) continue;

			for(int k=0;k<4;k++){

				if((k==j) || (k==i)) continue;

				for(int l=0;l<4;l++){

					if((l==i) || (l==j) || (l==k)) continue;
						
						arrayTemp[0] = arrayInput[i];
						arrayTemp[1] = arrayInput[j];
						arrayTemp[2] = arrayInput[k];
						arrayTemp[3] = arrayInput[l];
						
						operateFunc(arrayTemp);
				}
			}
		}
	}
}


void operateFunc(float numArr[]){


   
   float A = numArr[0], B = numArr[1], C = numArr[2], D = numArr[3];

   float sum = 0.00;
   string op1, op2, op3;

   //This section of the code is the outer most branch, it executes first, and runs only once. It combines the first two numbers
   //in the array with an operator, then saves the operator type as a string for printing. It then moves a branch lower to the
   //next loop. It saves the combination of the numbers as a "sum" variable, which probably needs a better name.

   sum = A + B;
   op1 = " + ";
   secondLoop(numArr, sum, C, D, op1, op2, op3);

   sum = A - B;
   op1 = " - ";
   secondLoop(numArr, sum, C, D, op1, op2, op3);

   sum = A / B;
   op1 = " / ";
   secondLoop(numArr, sum, C, D, op1, op2, op3);

   sum = A * B;
   op1 = " * ";
   secondLoop(numArr, sum, C, D, op1, op2, op3);

}

void secondLoop (float numArr[], float sum2, float intC, float intD, string &op1, string &op2, string &op3){

      int j = 0;


      // This section is the middle branch/loop, it runs 4 times. It is similar to the first branch, but it requires that
      // each sum be saved to a unique variable. This is a way to use only one variable, but this is a temproary workaround.
      // It sends the operator from the first branch, and this branch, into another function as arguements, along with the current sum.
      float sum3 = 0;

      do{
            j++;

            switch(j){
      		case 1:
          		sum3 = sum2 + intC;
          		op2 = " + ";
          		thirdLoop(numArr, sum3, intD, op1, op2, op3);
          		break;
        	case 2:
          		sum3 = sum2 - intC;
          		op2 = " - ";
          		thirdLoop(numArr, sum3, intD, op1, op2, op3);
          		break;
        	case 3:
         		sum3 = sum2 /  intC;
         		op2 = " / ";
         		thirdLoop(numArr, sum3, intD, op1, op2, op3);
          		break;
        	case 4:
          		sum3 = (sum2 * intC);
          		op2 = " * ";
          		thirdLoop(numArr, sum3, intD, op1, op2, op3);
          		break;
            default:
                break;
            }

      }while(j<4);

}


void thirdLoop (float numArr[], float sum4, float intD, string &op1, string &op2, string &op3){



    //This is the last branch. It runs 16 times. It combines the current sum to the last number with one of 4 operators, then prints the 
    //result in a user friendly way. It does this for all 4 operators, resulting in 64 lines printed.
    float sum5;

    sum5 = sum4 + intD;
    op3 = " + ";
    if(sum5 == 24)
    	cout << "(("<< numArr[0] << op1 << numArr[1]  << ")" << op2 << numArr[2]  << ")" << op3 << numArr[3]  << " = " << sum5 << endl;

    sum5 = (sum4 - intD);
    op3 = " - ";
    if(sum5 == 24)
    	cout << "(("<< numArr[0] << op1 << numArr[1]  << ")" << op2 << numArr[2]  << ")" << op3 << numArr[3]  << " = " << sum5 << endl;

    sum5 = sum4 / intD;
    op3 = " / ";
    if(sum5 == 24)
    	cout << "(("<< numArr[0] << op1 << numArr[1]  << ")" << op2 << numArr[2]  << ")" << op3 << numArr[3]  << " = " << sum5 << endl;

    sum5 = sum4 * intD;
    op3 = " * ";
    if(sum5 == 24)
    	cout << "(("<< numArr[0] << op1 << numArr[1]  << ")" << op2 << numArr[2]  << ")" << op3 << numArr[3]  << " = " << sum5 << endl;

}


